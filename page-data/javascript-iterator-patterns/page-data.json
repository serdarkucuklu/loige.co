{"componentChunkName":"component---src-templates-blog-post-js","path":"/javascript-iterator-patterns/","webpackCompilationHash":"8efb147b291008b62d0c","result":{"data":{"site":{"siteMetadata":{"title":"Luciano Mammino \"Loige\" - Web developer, entrepreneur, fighter, butterfly maker!","author":"Luciano Mammino","siteUrl":"https://loige.co/","twitterProfile":"loige","disqusShortName":"loige"}},"markdownRemark":{"id":"c6019193-e956-5d68-b94f-666d5369e7d8","fileAbsolutePath":"/home/circleci/loige.co/content/posts/2019-01-21_javascript-iterator-patterns/index.md","excerpt":"In this article we will explore different ways to create iterators and iterable\nvalues in Javascript, specifically functions, iterators‚Ä¶","timeToRead":12,"headings":[{"value":"The Fibonacci sequence","depth":2},{"value":"Functions","depth":2},{"value":"The Iterator protocol","depth":2},{"value":"The Iterable protocol","depth":2},{"value":"Generators","depth":2},{"value":"Conclusion","depth":2}],"html":"<p>In this article we will explore different ways to create iterators and iterable\nvalues in Javascript, specifically <strong>functions</strong>, <strong>iterators</strong>, <strong>iterables</strong>\nand <strong>generators</strong>.</p>\n<p>JavaScript is a very flexible language and most often you can achieve the same goals\nin many different ways, iterators are no exception!</p>\n<p>Wikipedia defines iterators as follows:</p>\n<blockquote>\n<p>In computer programming, an iterator is an object that enables a programmer\nto traverse a container, particularly lists. Various types of iterators are\noften provided via a container‚Äôs interface.</p>\n</blockquote>\n<p>We will extend this definition even further as we will not focus on building\niterators for pre-computed values like lists, but we will see how to iterate over\ngenerative sequences like the <a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\">Fibonacci sequence</a>.</p>\n<p>Most likely you won‚Äôt be using the Fibonacci sequence in your day to day programming\n(unless you are interviewing for some company who wants to validate your knowledge\nof recursion üòÜ), but the idea of generating a sequence of values on demand\n(lazy evaluation) translates well to a lot of real-life scenarios like:</p>\n<ul>\n<li>traversing custom data structures</li>\n<li>consuming paginated APIs</li>\n<li>draining a queue</li>\n<li>processing long files line by line</li>\n<li>read all the records from a SQL table</li>\n<li>etc.</li>\n</ul>\n<h2 id=\"the-fibonacci-sequence\"><a href=\"#the-fibonacci-sequence\" aria-label=\"the fibonacci sequence permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Fibonacci sequence</h2>\n<p>In case you have never seen the Fibonacci sequence before (or you don‚Äôt remember\nthe exact definition), here is how it looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"plain\"><pre class=\"language-plain\"><code class=\"language-plain\">1 1 2 3 5 8 13 21 ...</code></pre></div>\n<p>Essentially, a number in the sequence is given by the sum of the previous 2 numbers.</p>\n<p>In more formal mathematical terms, you can define the sequence as:</p>\n<blockquote>\n<p>F<sub>1</sub> = F<sub>2</sub> = 1<br>\nF<sub>n</sub> = F<sub>(n-1)</sub> + F<sub>(n-2)</sub></p>\n</blockquote>\n<p>Few things to notice:</p>\n<ul>\n<li>The sequence is infinite (it would be impossible to store it in a list without an upper limit).</li>\n<li>It is made by positive integers.</li>\n</ul>\n<p>So, how do we write some JavaScript code that allows us to iterate over this sequence and\ncalculate an arbitrary number of elements?</p>\n<p>Well, there are many ways‚Ä¶</p>\n<h2 id=\"functions\"><a href=\"#functions\" aria-label=\"functions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Functions</h2>\n<p>In JavaScript, functions are first class citizens and most patterns can be modeled\nwith the use of only plain functions. This will become natural once you master\nthe concepts of <em>function scope</em>, <em>anonymous functions</em> and <em>nested functions</em>.</p>\n<p>So, how can we build a fibonacci sequence by using only functions?</p>\n<p>Here‚Äôs an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">genFib</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">max <span class=\"token operator\">=</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_SAFE_INTEGER</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// initialize default values in the scope</span>\n  <span class=\"token keyword\">let</span> n1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> n2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token comment\">// returns an anonymous function that will return the next element</span>\n  <span class=\"token comment\">// every time that it is called</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// calculates the next value</span>\n    <span class=\"token keyword\">const</span> nextVal <span class=\"token operator\">=</span> n2 <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> n1 <span class=\"token operator\">+</span> n2\n\n    <span class=\"token comment\">// redefines n1 and n2 to match new values</span>\n    <span class=\"token keyword\">const</span> prevVal <span class=\"token operator\">=</span> n2\n    n2 <span class=\"token operator\">=</span> nextVal\n    n1 <span class=\"token operator\">=</span> prevVal\n\n    <span class=\"token comment\">// if we reached the upper bound return null (iteration completed)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextVal <span class=\"token operator\">>=</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// return the new value</span>\n    <span class=\"token keyword\">return</span> nextVal\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I added some comments to make the code easy to understand, but let‚Äôs go through it\nonce more.</p>\n<ol>\n<li><code class=\"language-text\">genFib</code> is a function that accepts an optional parameter, which is the upper bound\nused to define when to stop computing elements in the sequence. JavaScript numbers\nstarts to lose precision after <code class=\"language-text\">Number.MAX_SAFE_INTEGER</code>, so this is a sensible default.</li>\n<li>The first thing that happens in the function is initializing the function scope.\n<code class=\"language-text\">n1</code> and <code class=\"language-text\">n2</code> are the only two values that we need to compute an element of\nthe sequence. They represent the last 2 numbers computed. We set them to <code class=\"language-text\">0</code> by default.</li>\n<li>At this point the function returns an anonymous function. This function can be\ninvoked an arbitrary number of times and every time it will compute and return\na new element in the sequence, making sure the internal state is updated accordingly.</li>\n</ol>\n<p>Notice that <code class=\"language-text\">genFib</code> will initizalize a new isolated scope containing <code class=\"language-text\">n1</code> and <code class=\"language-text\">n2</code>.\nThese values will be accessible (and modifiable) only by the anonymous function returned\nby <code class=\"language-text\">genFib</code>. This means that you can generate multiple ‚Äúiterators‚Äù and everyone of them\nwill be independent from each other.</p>\n<p>To understand this even better let‚Äôs see an example on how a user would use this code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> f <span class=\"token operator\">=</span> <span class=\"token function\">genFib</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// limit the sequence to numbers below 6</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 2</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 5</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// null</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// null</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// null</span>\n\n<span class=\"token comment\">// or with a loop</span>\n\n<span class=\"token comment\">// prints all the numbers of the sequence below MAX_SAFE_INTEGER</span>\n<span class=\"token keyword\">const</span> f2 <span class=\"token operator\">=</span> <span class=\"token function\">genFib</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> current\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>current <span class=\"token operator\">=</span> <span class=\"token function\">f2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"the-iterator-protocol\"><a href=\"#the-iterator-protocol\" aria-label=\"the iterator protocol permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Iterator protocol</h2>\n<p>In the previous example we came up with our own way to define how to iterate through\nthe elements (returned anonymous function) and how to understand whether the sequence\nwas over (return of <code class=\"language-text\">null</code>).</p>\n<p><strong>ECMAScript 2015</strong> provides a standard and interoperable way to define iterator\nobjects. This is called <strong>the Iterator protocol</strong>.</p>\n<p>In short, a JavaScript object is <em>an iterator</em> if it implements a <code class=\"language-text\">next()</code>\nmethod with the following semantic:</p>\n<ul>\n<li><code class=\"language-text\">next()</code> does not accept any argument.</li>\n<li><code class=\"language-text\">next()</code> has to return an object with 2 properties: <code class=\"language-text\">done</code> and <code class=\"language-text\">value</code>.</li>\n<li><code class=\"language-text\">done</code> is a boolean and it will be set to <code class=\"language-text\">true</code> if and only if there are no\nmore elements in the sequence.</li>\n<li><code class=\"language-text\">value</code> will contain the actual value as computed in the last iteration\n(could be <code class=\"language-text\">undefined</code> when <code class=\"language-text\">done</code> is <code class=\"language-text\">true</code>).</li>\n</ul>\n<p>Ok, now let‚Äôs rewrite our Fibonacci sequence to implement the Iterator protocol:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">genFibIterator</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">max <span class=\"token operator\">=</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_SAFE_INTEGER</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> n1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> n2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token comment\">// this time we return an iterator object (rather than a function)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// the logic needed to compute the next element is inside the `next` method</span>\n    <span class=\"token function-variable function\">next</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// calculates the next value</span>\n      <span class=\"token keyword\">let</span> nextVal <span class=\"token operator\">=</span> n2 <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> n1 <span class=\"token operator\">+</span> n2\n\n      <span class=\"token comment\">// redefines n1 and n2 to match new values</span>\n      <span class=\"token keyword\">const</span> prevVal <span class=\"token operator\">=</span> n2\n      n2 <span class=\"token operator\">=</span> nextVal\n      n1 <span class=\"token operator\">=</span> prevVal\n\n      <span class=\"token comment\">// if we reached the upper bound (iteration completed)</span>\n      <span class=\"token comment\">// set done to true and nextVal to undefined</span>\n      <span class=\"token keyword\">let</span> done <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextVal <span class=\"token operator\">>=</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        nextVal <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span>\n        done <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// return the iteration object as for the iteration protocol</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> nextVal<span class=\"token punctuation\">,</span> done <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The comments in the code should help you to understand the new logic.</p>\n<p>Let‚Äôs see how to use our new Fibonacci iterator implementation:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> it <span class=\"token operator\">=</span> <span class=\"token function\">genFibIterator</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { next: [Function: next] }</span>\nit<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 1, done: false }</span>\nit<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 1, done: false }</span>\nit<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 2, done: false }</span>\nit<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 3, done: false }</span>\nit<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 5, done: false }</span>\nit<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { done: true }</span>\n\n<span class=\"token comment\">// or</span>\n\n<span class=\"token keyword\">const</span> it2 <span class=\"token operator\">=</span> <span class=\"token function\">genFibIterator</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> it2<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>result<span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  result <span class=\"token operator\">=</span> it2<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// 3</span>\n<span class=\"token comment\">// 5</span></code></pre></div>\n<h2 id=\"the-iterable-protocol\"><a href=\"#the-iterable-protocol\" aria-label=\"the iterable protocol permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Iterable protocol</h2>\n<p>In the previous section we saw how to define <strong>Iterator objects</strong> that conform\nthe Iterator protocol. In reality, we might want to express the concept of\n‚Äúiterability‚Äù in a more generic fashion, so that, given any object, we can tell if\nsuch object is iterable or not.</p>\n<p>For this reason, ECMAScript 2015 defines also the <strong>Iterable protocol</strong>.</p>\n<p>An object is said to be <em>iterable</em> if it exposes a property called <code class=\"language-text\">Symbol.iterator</code>,\nwhich is a function that returns an <em>iterator</em> object.</p>\n<p>You can introspectively check if an object is <em>iterable</em> with some code like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">isIterable</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ECMAScript 2015 also provides a new <code class=\"language-text\">for</code> construct (<code class=\"language-text\">for...of</code>) that allows to\neasily iterate over the elements of an iterable object:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> current <span class=\"token keyword\">of</span> someIterable<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Iterable objects can also be used in combination with the <strong>spread operator</strong> to\neagerly load all the values and store them into an array:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> allValues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>someIterable<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Ok, now let‚Äôs rewrite our Fibonacci sequence to implement the Iterable protocol:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">genFibIterable</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">max <span class=\"token operator\">=</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_SAFE_INTEGER</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> n1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> n2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token comment\">// returns an iterable object</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// returns an iterator</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">let</span> nextVal <span class=\"token operator\">=</span> n2 <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> n1 <span class=\"token operator\">+</span> n2\n\n          <span class=\"token keyword\">const</span> prevVal <span class=\"token operator\">=</span> n2\n          n2 <span class=\"token operator\">=</span> nextVal\n          n1 <span class=\"token operator\">=</span> prevVal\n\n          <span class=\"token keyword\">let</span> done <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextVal <span class=\"token operator\">>=</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            nextVal <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span>\n            done <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span>\n\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> nextVal<span class=\"token punctuation\">,</span> done <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>What we did here is to just move the implementation of the iterator seen in the\nprevious section into the <code class=\"language-text\">Symbol.iterator</code> function.</p>\n<p>Note that it is possible to come up with an implementation that can satisfy the Iterator and the Iterable protocols\nat the same time :</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">genFib</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">max <span class=\"token operator\">=</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_SAFE_INTEGER</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> n1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> n2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// this satisfies the Iterator protocol</span>\n    <span class=\"token function-variable function\">next</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> nextVal <span class=\"token operator\">=</span> n2 <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> n1 <span class=\"token operator\">+</span> n2\n\n      <span class=\"token keyword\">const</span> prevVal <span class=\"token operator\">=</span> n2\n      n2 <span class=\"token operator\">=</span> nextVal\n      n1 <span class=\"token operator\">=</span> prevVal\n\n      <span class=\"token keyword\">let</span> done <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextVal <span class=\"token operator\">>=</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        nextVal <span class=\"token operator\">=</span> <span class=\"token keyword\">undefined</span>\n        done <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> value<span class=\"token punctuation\">:</span> nextVal<span class=\"token punctuation\">,</span> done <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// this satisfies the Iterable protocol</span>\n    <span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// returns `this` because the object itself is an iterator</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The comments in the code should help you to understand the logic in these 2\nimplementations.</p>\n<p>With this new approaches you can generate numbers from the Fibonacci sequence as\nfollows:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// prints all the numbers in the sequence until MAX_SAFE_INTEGER</span>\n<span class=\"token keyword\">const</span> f <span class=\"token operator\">=</span> <span class=\"token function\">genFibIterable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> n <span class=\"token keyword\">of</span> f<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// creates an array with all the Fibonacci numbers lower than 17</span>\n<span class=\"token keyword\">const</span> f2 <span class=\"token operator\">=</span> <span class=\"token function\">genFibIterable</span><span class=\"token punctuation\">(</span><span class=\"token number\">17</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> lowerThan17 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>f2<span class=\"token punctuation\">]</span> <span class=\"token comment\">// [ 1, 1, 2, 3, 5, 8, 13 ]</span></code></pre></div>\n<p>If at this point you are still struggling to see the logical difference between\nan <em>iterator</em> and an <em>iterable</em> object you can see it this way:</p>\n<ul>\n<li>An <em>iterable</em> is an object on which you can iterate over.</li>\n<li>An <em>iterator</em> is a cursor object that allows you to iterate over an <em>iterable</em>.</li>\n</ul>\n<h2 id=\"generators\"><a href=\"#generators\" aria-label=\"generators permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generators</h2>\n<p>Another great addition coming from ECMAScript 2015 to JavaScript are <strong>Generators</strong>.\nMore specifically, ECMAScript 2015 defines <strong>Generator functions</strong> and <strong>Generator objects</strong>.</p>\n<blockquote>\n<p>A <code class=\"language-text\">function*</code> declaration (function keyword followed by an asterisk) defines\na <em>Generator function</em>, which returns a <em>Generator object</em>.</p>\n</blockquote>\n<p>Generators are functions which can be exited and later re-entered.\nTheir context (variable bindings) will be saved across re-entrances.</p>\n<p>To simplify this concept a bit, you can see generator functions as functions that\ncan ‚Äúreturn‚Äù (or ‚Äù<em>yield</em>‚Äù) multiple times.</p>\n<p>Let‚Äôs explore the generator syntax with a simple example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// generator function</span>\n<span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">countTo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In this example we are defining a <code class=\"language-text\">counter</code> that generates numbers from 1 to 3.\nWe can use it as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// c is a generator object</span>\n<span class=\"token keyword\">const</span> c <span class=\"token operator\">=</span> <span class=\"token function\">countTo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 1, done: false }</span>\nc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 2, done: false }</span>\nc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 3, done: true }</span>\nc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { done: true }</span>\nc<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { done: true }</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>So, the way a generator works is the following:</p>\n<ul>\n<li>When you invoke a <em>generator function</em>, a <em>generator object</em> is returned.</li>\n<li>Generator objects have a <code class=\"language-text\">next()</code> method.</li>\n<li>When you invoke the <code class=\"language-text\">next()</code> method of a <em>generator object</em> the code of the\ngenerator will be executed until the first <code class=\"language-text\">yield</code> (or <code class=\"language-text\">return</code>) is encountered.</li>\n<li>If a <code class=\"language-text\">yield</code> was found, the code is stopped and the yielded value will be passed\nto the invoking context though an object with the following shape: <code class=\"language-text\">{ value: &lt;yieldedValue&gt;, done: false }</code>.</li>\n<li>The next time <code class=\"language-text\">next()</code> is invoked, the execution will be resumed from the point\nwhere it was initially suspended until a new <code class=\"language-text\">yield</code> or <code class=\"language-text\">return</code> is found.</li>\n<li>If a <code class=\"language-text\">return</code> statement is found (or the function completes), the object\nreturned will look like: <code class=\"language-text\">{ value: &lt;returnedValue&gt;, done: true }</code>\n(notice the <code class=\"language-text\">done</code> now set to <code class=\"language-text\">true</code>).</li>\n<li>Once the generator has completed, consecutive calls to <code class=\"language-text\">next()</code> will always produce <code class=\"language-text\">{ done: true }</code>.</li>\n</ul>\n<p>Of course, the reason why we are exploring this topic is because we can implement\nour Fibonacci sequence as a generator:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">Fib</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">max <span class=\"token operator\">=</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_SAFE_INTEGER</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// initialize the state variables</span>\n  <span class=\"token keyword\">let</span> n1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token keyword\">let</span> n2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token comment\">// we can now pre-initialize nextVal to 1 as part of the state</span>\n  <span class=\"token keyword\">let</span> nextVal <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n  <span class=\"token comment\">// loop until we exceed the max number</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>nextVal <span class=\"token operator\">&lt;=</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// yields the current value</span>\n    <span class=\"token keyword\">yield</span> nextVal\n\n    <span class=\"token comment\">// shifts nextVal -> n2 and n2 -> n1</span>\n    <span class=\"token keyword\">const</span> prevVal <span class=\"token operator\">=</span> n2\n    n2 <span class=\"token operator\">=</span> nextVal\n    n1 <span class=\"token operator\">=</span> prevVal\n\n    <span class=\"token comment\">// calculates the next value</span>\n    nextVal <span class=\"token operator\">=</span> n1 <span class=\"token operator\">+</span> n2\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The comments in the code should help you with understanding this implementation.</p>\n<p>You can immediately notice that since we don‚Äôt have to deal with a <em>nested function</em>,\nthe implementation seems easier to read, or at least it might feel easier to read\nthe code and understand the actual execution flow.</p>\n<p>For this reason, you might prefer to use generators over plain functions in this\nkind of scenarios.</p>\n<p>We can use our new generator-based Fibonacci sequence as in this example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fib <span class=\"token operator\">=</span> <span class=\"token function\">Fib</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\nfib<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 1, done: false }</span>\nfib<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 1, done: false }</span>\nfib<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 2, done: false }</span>\nfib<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 3, done: false }</span>\nfib<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { value: 5, done: false }</span>\nfib<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// { done: true }</span>\n\n<span class=\"token comment\">// or</span>\n\n<span class=\"token keyword\">const</span> fib2 <span class=\"token operator\">=</span> <span class=\"token function\">Fib</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> fib2<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>result<span class=\"token punctuation\">.</span>done<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  result <span class=\"token operator\">=</span> fib2<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// 3</span>\n<span class=\"token comment\">// 5</span></code></pre></div>\n<p>At this point you might be wandering:</p>\n<blockquote>\n<p>Is a generator object an iterator or an iterable?</p>\n</blockquote>\n<p>Well, it turns out that <strong>a generator object is both an iterator and iterable</strong>!</p>\n<p>So you can also use our latest implementation with the <code class=\"language-text\">for...of</code> and the <em>spread</em>\nsyntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> fib <span class=\"token operator\">=</span> <span class=\"token function\">Fib</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> current <span class=\"token keyword\">of</span> fib<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// 3</span>\n<span class=\"token comment\">// 5</span>\n\n<span class=\"token comment\">// or</span>\n<span class=\"token keyword\">const</span> fib2 <span class=\"token operator\">=</span> <span class=\"token function\">Fib</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>fib2<span class=\"token punctuation\">]</span> <span class=\"token comment\">// [ 1 1 2 3 5 ]</span></code></pre></div>\n<p>Finally, since generators are <em>iterators</em>, you can use them as <code class=\"language-text\">Symbol.iterator</code>\nproperty of an <em>iterable object</em>. This could help you to define the iteration logic\nin a more elegant and concise way, taking advantage of the <code class=\"language-text\">yield</code> keyword.</p>\n<p>To some extent, you can see generators as a syntactic sugar to define iterable objects.</p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>In this article we learned about different ways to generate dynamic sequences using\nplain functions, iterators, iterables and generators.</p>\n<p>Notice that these approaches are ideal when the operation needed to generate the\nnext element is synchronous (it doesn‚Äôt require external resources to be\nloaded asynchronously).</p>\n<p>When you have to iterate over values that become available asynchronously you\nhave to rely on different patterns such as\n<a href=\"https://nodejs.org/api/events.html\"><strong>event emitters</strong></a>,\n<a href=\"https://nodejs.org/api/stream.html\"><strong>streams</strong></a>, or\n<a href=\"https://github.com/tc39/proposal-async-iteration\"><strong>async iterators</strong></a>.</p>\n<p>Also, notice that generators have some interesting advanced features not covered\nin this article, like the opportunity to pass new values in the context every\ntime <code class=\"language-text\">.next()</code> is called or to throw exceptions, so make sure you checkout\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator\">the generators documentation</a>.</p>\n<p>If you liked this article and you are interested in similar content, be sure\nto checkout my book <strong><a href=\"https://www.nodejsdesignpatterns.com\">Node.js Design Patterns</a></strong>.</p>\n<p><a href=\"https://www.nodejsdesignpatterns.com\"><span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 200px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 123%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQADAv/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABywR5zomShLgLVVImk//EAB4QAAICAgIDAAAAAAAAAAAAAAECAAMRExIUMjNB/9oACAEBAAEFAlC8bMAzSyQ0kjrCF12EiDE+Vey/z//EABkRAAIDAQAAAAAAAAAAAAAAAAABAhIhEf/aAAgBAwEBPwGpUWslj4f/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQISIf/aAAgBAgEBPwGxYliI6j//xAAdEAACAQUBAQAAAAAAAAAAAAAAASECEBESgTEy/9oACAEBAAY/AlFPhGOW13ZNTPocoh5JeLct/8QAHhABAAICAwADAAAAAAAAAAAAAQAhETFBUWEQgbH/2gAIAQEAAT8hsOXsMIAULfgoODo4mLOPY9A+5unkLzHlK8ZTWusw0mmPxn//2gAMAwEAAgADAAAAEDfPA//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEVH/2gAIAQMBAT8Q30t9JhiTHF//xAAXEQEBAQEAAAAAAAAAAAAAAAABABFR/9oACAECAQE/EMcbHG0jBBb/xAAiEAEAAgEDAwUAAAAAAAAAAAABABEhMVGhEEFhgZGxwdH/2gAIAQEAAT8Qul0FqrjXBXrKzzUCLtk6HbGKWwaHbwzIGbRiX7eZZyjan5LjWSUu5UrqVKCU5jsBzqBicScpPj/c/9k='); background-size: cover; display: block;\"\n    ></span>\n    <picture>\n        <source\n          srcset=\"/static/cb588b738a90b17740d5c8fd47777e73/dd2ee/node-js-design-patterns.webp 200w\"\n          sizes=\"(max-width: 200px) 100vw, 200px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/cb588b738a90b17740d5c8fd47777e73/122c5/node-js-design-patterns.jpg 200w\"\n          sizes=\"(max-width: 200px) 100vw, 200px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n          src=\"/static/cb588b738a90b17740d5c8fd47777e73/122c5/node-js-design-patterns.jpg\"\n          alt=\"Node.js Design Patterns Second Edition by Mario Casciaro and Luciano Mammino\"\n          title=\"\"\n        />\n      </picture>\n  </span></a></p>\n<p>This book contains more than 500 pages, filled with more than 100 examples on\nNode.js (and JavaScript) design patterns. I am sure you won‚Äôt be disappointed!</p>\n<p>Have fun! :)</p>","frontmatter":{"title":"JavaScript iterator patterns","meta_description":null,"slug":"javascript-iterator-patterns","author":"Luciano Mammino","tags":["javascript","node-js","design-patterns"],"date":"January 21, 2019","dateISO":"2019-01-21T03:25:58.000Z","header_img":{"publicURL":"/static/javascript-iterator-patterns-rubber-ducks-56b05b1b85fe34d719e0049d77867936.jpg"},"fb_img":{"publicURL":"/static/javascript-iterator-patterns-fb-1f2a1163e60f7de1a013f6604610b0e5.png"},"tw_img":{"publicURL":"/static/javascript-iterator-patterns-tw-9d6c37e0e9143f3cead7aa62416a2a7e.png"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"tags":["javascript","node-js","design-patterns"],"slug":"javascript-iterator-patterns","previous":{"timeToRead":14,"excerpt":"It is that time of the year when I have to look back at the previous year and see what were my achievements, my failures and set my expectations for my 2019.Full disclosure: I write this type of posts mostly for myself, so I expect this to be\nboring to death and most likely useless for everyone else.You have been warned, read at your own risk!Static blog migrationInteresting achievement of the last year is that I finally migrated this blog from Ghost to a static setup using totally free and Open Source‚Ä¶","fields":{"slug":"2018-a-year-in-review"},"frontmatter":{"date":"20 January, 2019","title":"2018 - A year in review","tags":["life"],"header_img":{"publicURL":"/static/loige-co-2018-a-year-in-review-luciano-mammino-blog-e619a5cfd135c39ea23b2caa1e1b1cfd.jpg"}}},"next":{"timeToRead":12,"excerpt":"In this article I will show my setup to build and share web apps prototypes using Fastify and Preact, two technologies that I love.I will also use htm, a library that can be easily integrated with Preact to define DOM elements in a very expressive and react-like way (like JSX), without having to use transpilers like Babel. Finally we will see how to dockerize a sample app built with this setup. This will make the app easy to share with co-workers and friends.I came up with this stack, few weeks ago when I‚Ä¶","fields":{"slug":"fastify-and-preact-for-quick-web-app-prototyping"},"frontmatter":{"date":"18 February, 2019","title":"Fastify and Preact for quick web app prototyping","tags":["javascript","node-js","fastify","react","docker"],"header_img":{"publicURL":"/static/fastify-and-preact-for-quick-web-app-prototyping-a842c94d30f4087735ab1ad47fcb60de.jpg"}}},"similar":[{"slug":"emerging-javascript-pattern-multiple-return-values","title":"Emerging JavaScript pattern: multiple return values","publishedAt":"11 November, 2018","score":3},{"slug":"fastify-and-preact-for-quick-web-app-prototyping","title":"Fastify and Preact for quick web app prototyping","publishedAt":"18 February, 2019","score":2},{"slug":"my-serverless-talk-at-shift-conference-in-split","title":"My Serverless talk at Shift conference in Split","publishedAt":"15 June, 2017","score":2},{"slug":"my-universal-javascript-web-applications-talk-at-codemotion-rome-2017","title":"My Universal JavaScript Web Applications talk at Codemotion Rome 2017","publishedAt":"11 April, 2017","score":2},{"slug":"unshorten-expand-short-urls-with-node-js","title":"Unshorten (expand) short URLs with Node.js","publishedAt":"31 March, 2017","score":2}]}}}