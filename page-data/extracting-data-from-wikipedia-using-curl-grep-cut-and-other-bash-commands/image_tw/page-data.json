{"componentChunkName":"component---src-templates-blog-post-share-image-js","path":"/extracting-data-from-wikipedia-using-curl-grep-cut-and-other-bash-commands/image_tw","result":{"data":{"site":{"siteMetadata":{"title":"Luciano Mammino \"Loige\" - Cloud developer, entrepreneur, fighter, butterfly maker!","author":"Luciano Mammino","siteUrl":"https://loige.co","twitterProfile":"loige","disqusShortName":"loige"}},"markdownRemark":{"id":"e3162a30-89cf-5dc8-babf-4a9c63454c09","timeToRead":15,"headings":[{"value":"The need","depth":2},{"value":"The dataset","depth":2},{"value":"Extracting data with grep","depth":2},{"value":"Cleaning up the data with cut","depth":2},{"value":"Substring with cut","depth":3},{"value":"Splitting strings with cut","depth":3},{"value":"Counting and sorting with uniq and sort","depth":2},{"value":"Combining all together","depth":2},{"value":"Conclusion","depth":2},{"value":"Alternative approaches","depth":2},{"value":"Improved grep with the reset match operator","depth":3},{"value":"quget","depth":3},{"value":"awk","depth":3},{"value":"sed","depth":3},{"value":"In-Browser developer console","depth":3},{"value":"XPath and Google Spreadsheet or Python","depth":3}],"html":"<p>In this article I am going to show you how I was able to extract and process some information from Wikipedia only using a combination of common bash utilities like <code>curl</code> and <code>grep</code>.</p>\n<h2 id=\"the-need\" style=\"position:relative;\"><a href=\"#the-need\" aria-label=\"the need permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The need</h2>\n<p>If you are a sport lover like me I guess your heart is currently being warmed by the <strong>Rio 2016 Olympic games</strong>. My favourite sport in the games is <strong>Judo</strong> and now that the competitions are over I was wondering who were <strong>the best olympic ‚Äújudokas‚Äù of all the times</strong> by number of medals collected during the games (no matter the kind of medal).\nI tried to <em>google</em> the answer for a while but it wasn‚Äôt easy to find an up to date result, so I decided to do some quick research and trying to get to a conclusion by myself. I have to say it was I bit tougher than I expected, but it was definitively fun‚Ä¶</p>\n<h2 id=\"the-dataset\" style=\"position:relative;\"><a href=\"#the-dataset\" aria-label=\"the dataset permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The dataset</h2>\n<p>The first thing I needed was a reliable and up to date data source listing all the Judo Olympic medal winners in history. This was easy to find on Wikipedia: <a href=\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo\">List of Olympic medalists in Judo</a>.\nAnyway the data on this Wikipedia page is structured to be easy to read by humans and not to be processed by a machine. Also I didn‚Äôt found any way to have the same data in the page in a <em>csv</em> or <em>json</em> format, so the only viable option was to extract the data by myself from the web page.\nAt first I thought about creating a quick and dirty <a href=\"/tag/javascript\">JavaScript</a> command and use some library like <a href=\"https://cheerio.js.org\">cheerio</a> to extract the data directly from the HTML code of the page, but it sounded like to much of work for the simple goal I had in mind.\nSo I had another quick look at Wikipedia to find out if there was any better format to extract the information. Going to the <em>edit</em> option of the page I realized that parsing the <a href=\"https://www.mediawiki.org/wiki/Markup_spec\">wikitext</a> (source) of the page would have been much easier and I could even use a regular expression to extract the relevant information from there.\nAt this stage I wondered if there was a way to get only the wikitext of a specific Wikipedia page. It turns out that it‚Äôs possible and it‚Äôs very easy: you just need to append the query parameter <code>?action=raw</code> in the url!</p>\n<p>So hitting <a href=\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo?action=raw\">https://en.wikipedia.org/wiki/List<em>of</em>Olympic<em>medalists</em>in_judo?action=raw</a> will give us our starting dataset which will look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"wiki\"><pre class=\"language-wiki\"><code class=\"language-wiki\"><span class=\"token heading\"><span class=\"token punctuation\">==</span><span class=\"token important\">Men</span><span class=\"token punctuation\">==</span></span>\n<span class=\"token heading\"><span class=\"token punctuation\">===</span><span class=\"token important\">Extra Lightweight</span><span class=\"token punctuation\">===</span></span>\n<span class=\"token punctuation\">*</span>60<span class=\"token entity\" title=\"&nbsp;\">&amp;nbsp;</span>kg\n<span class=\"token punctuation\">{|</span> <span class=\"token variable\">{{MedalistTable|type=Games}}</span>\n<span class=\"token punctuation\">|-</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">rowspan</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>2</span><span class=\"token table-bar punctuation\">|</span></span><span class=\"token url\">[[Judo at the 1980 Summer Olympics|1980 Moscow]]</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token variable\">{{DetailsLink|Judo at the 1980 Summer Olympics ‚Äì Men's 60 kg}}</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">rowspan</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>2</span><span class=\"token table-bar punctuation\">|</span></span>{{flagIOCmedalist|<span class=\"token url\">[[Thierry Rey]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">FRA</span><span class=\"token table-bar punctuation\">|</span></span>1980 Summer}}\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">rowspan</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>2</span><span class=\"token table-bar punctuation\">|</span></span>{{flagIOCmedalist|<span class=\"token url\">[[Jos√© Rodr√≠guez (judoka)|Jos√© Rodr√≠guez]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">CUB</span><span class=\"token table-bar punctuation\">|</span></span>1980 Summer}}\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">{{flagIOCmedalist</span><span class=\"token table-bar punctuation\">|</span></span><span class=\"token url\">[[Tibor Kincses (judoka)|Tibor Kincses]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">HUN</span><span class=\"token table-bar punctuation\">|</span></span>1980 Summer}}\n<span class=\"token punctuation\">|-</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">{{flagIOCmedalist</span><span class=\"token table-bar punctuation\">|</span></span><span class=\"token url\">[[Aramby Emizh]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">URS</span><span class=\"token table-bar punctuation\">|</span></span>1980 Summer}}\n<span class=\"token punctuation\">|-</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">rowspan</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>2</span><span class=\"token table-bar punctuation\">|</span></span><span class=\"token url\">[[Judo at the 1984 Summer Olympics|1984 Los Angeles]]</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span><span class=\"token variable\">{{DetailsLink|Judo at the 1984 Summer Olympics ‚Äì Men's 60 kg}}</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">rowspan</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>2</span><span class=\"token table-bar punctuation\">|</span></span>{{flagIOCmedalist|<span class=\"token url\">[[Shinji Hosokawa]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">JPN</span><span class=\"token table-bar punctuation\">|</span></span>1984 Summer}}\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">rowspan</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>2</span><span class=\"token table-bar punctuation\">|</span></span>{{flagIOCmedalist|<span class=\"token url\">[[Kim Jae-Yup]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">KOR</span><span class=\"token table-bar punctuation\">|</span></span>1984 Summer}}\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">{{flagIOCmedalist</span><span class=\"token table-bar punctuation\">|</span></span><span class=\"token url\">[[Neil Eckersley]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">GBR</span><span class=\"token table-bar punctuation\">|</span></span>1984 Summer}}\n<span class=\"token punctuation\">|-</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">{{flagIOCmedalist</span><span class=\"token table-bar punctuation\">|</span></span><span class=\"token url\">[[Edward Liddie]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">USA</span><span class=\"token table-bar punctuation\">|</span></span>1984 Summer}}\n<span class=\"token punctuation\">|-</span>\n...</code></pre></div>\n<p>Note that, for the sake of brevity, from now on I will use <code>...</code> to indicates that there‚Äôs a lot of data that was stripped from the example.</p>\n<p>We can easily get this data into our bash shell with <code>curl</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -sS <span class=\"token string\">\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo?action=raw\"</span></code></pre></div>\n<p>In case you don‚Äôt know the options <code>-sS</code> allow to strip out the download progress output and just print the downloaded data (or any possible error) in the console.</p>\n<p>Now that we have our dataset, to compute the result we need to:</p>\n<ul>\n<li>Extract all the athletes names</li>\n<li>Count the occurrences of each one of them</li>\n<li>Reverse order them by the resulting count.</li>\n</ul>\n<p>We will do so with a combination of bash commands, bound together using the pipe operator (<code>|</code>). Pipes let you use the output of a program as the input of another one, effectively creating a stream of data that is transformed step by step by small and easy to understand operations.</p>\n<h2 id=\"extracting-data-with-grep\" style=\"position:relative;\"><a href=\"#extracting-data-with-grep\" aria-label=\"extracting data with grep permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extracting data with <code>grep</code></h2>\n<p>The dataset shown before is just the wikitext code needed to render the tables of athletes that won medals by category and year. So we can easily assume that all the athletes listed in the page are interesting for us.</p>\n<p>As you can see every athlete is referenced in the code using the <em>template</em> <code>flagIOCmedalist</code> and every entry looks like:</p>\n<div class=\"gatsby-highlight\" data-language=\"wiki\"><pre class=\"language-wiki\"><code class=\"language-wiki\">{{flagIOCmedalist|<span class=\"token url\">[[NAME]]</span><span class=\"token punctuation\">|</span><span class=\"token table-tag\"><span class=\"token attr-name\">COUNTRY</span><span class=\"token table-bar punctuation\">|</span></span>OLYMPIC GAME}}</code></pre></div>\n<p>So we can easily extract all the athletes names with a regex like the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">flagIOCmedalist\\|\\[\\[(.+)\\]\\]</code></pre></div>\n<p>This regular expression behaves as described in the following picture:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1024px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.46875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQY01WPaW6DMBBGuf8FeoTeoFKbKilOq4QlwXghNmvMYggFbJMLlIYfVd9In55Go5E+C+W3Fyd7PfJ3P/NpThFkFGNCGI9bkfT08xYdRu50GeFxEsdxmqaMsbqutdZWJPQZcRye2IXCEF5wUHLkeP44Dma+Kz0rM09mVvoPY4xSapomy43DzXG73WxtYO92H5F3qDlhjN+6buh7NYy/h/9ZXyxiNX3lIrQH+z0ALgyCc4AwORB4hsHu5HgpE51spWzbtmmaJaWU9YPFrWGcXfcEgG2DL+htyNsTBc8wS4pSMFnhpkgqIa5XIURRFGVZFg/yPF82Fr1++4ihEBJKQwh56FU8wCEeh+FuzF3rWZtl1qprriz+A4kxN+ymWQloAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/fb468c1be2ff469924fce092fcf3c4a1/8d3d1/flagIOCmedalist_matches_the_characters_flagIOCmedalist.webp 256w,\n/static/fb468c1be2ff469924fce092fcf3c4a1/354cf/flagIOCmedalist_matches_the_characters_flagIOCmedalist.webp 512w,\n/static/fb468c1be2ff469924fce092fcf3c4a1/44907/flagIOCmedalist_matches_the_characters_flagIOCmedalist.webp 1024w,\n/static/fb468c1be2ff469924fce092fcf3c4a1/cbb6e/flagIOCmedalist_matches_the_characters_flagIOCmedalist.webp 1192w\"\n          sizes=\"(max-width: 1024px) 100vw, 1024px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/fb468c1be2ff469924fce092fcf3c4a1/85b06/flagIOCmedalist_matches_the_characters_flagIOCmedalist.png 256w,\n/static/fb468c1be2ff469924fce092fcf3c4a1/bc282/flagIOCmedalist_matches_the_characters_flagIOCmedalist.png 512w,\n/static/fb468c1be2ff469924fce092fcf3c4a1/f1720/flagIOCmedalist_matches_the_characters_flagIOCmedalist.png 1024w,\n/static/fb468c1be2ff469924fce092fcf3c4a1/2633e/flagIOCmedalist_matches_the_characters_flagIOCmedalist.png 1192w\"\n          sizes=\"(max-width: 1024px) 100vw, 1024px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/fb468c1be2ff469924fce092fcf3c4a1/f1720/flagIOCmedalist_matches_the_characters_flagIOCmedalist.png\"\n          alt=\"flagIOCmedalist matches the characters flagIOCmedalist literally\"\n          title=\"flagIOCmedalist matches the characters flagIOCmedalist literally\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p>If you want to understand all the details of this regex you can play with it on <a href=\"https://regex101.com/r/cT7nD8/2\">regex101</a>.</p>\n<p>In the shell we can apply a regex to an input data using <code>grep</code>. We need to concatenate the output of <code>curl</code> to <code>grep</code> using the pipe operator (<code>|</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token punctuation\">..</span>. <span class=\"token operator\">|</span>  <span class=\"token function\">grep</span> -Eoi <span class=\"token string\">\"flagIOCmedalist\\|\\[\\[(.+)\\]\\]\"</span></code></pre></div>\n<p>With the <code>grep</code> we are using the options <code>-Eoi</code> which allow us to:</p>\n<ul>\n<li><code>-E</code>: use a POSIX <em>extended</em> regular expression (<a href=\"https://en.wikibooks.org/wiki/Regular_Expressions/POSIX-Extended_Regular_Expressions\">ERE</a>)</li>\n<li><code>-o</code>: print only the matched (non-empty) parts of a matching line</li>\n<li><code>-i</code>: case insensitive matching (this is not really needed for our problem, but could allow us to match any case variation of the template reference like <code>flagiocmedalist</code> and <code>FLAGIOCMEDALIST</code>).</li>\n</ul>\n<p>The previous command is going to output something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">flagIOCmedalist|[[Thierry Rey]]\nflagIOCmedalist|[[Jos√© Rodr√≠guez (judoka)|Jos√© Rodr√≠guez]]\nflagIOCmedalist|[[Tibor Kincses (judoka)|Tibor Kincses]]\nflagIOCmedalist|[[Aramby Emizh]]\n...</code></pre></div>\n<p>Which, of course, looks kind of ugly. We ideally want to have only the name of every athlete and not all the <code>template</code> syntax wrapping it.</p>\n<p>Let‚Äôs try to clean up the data a little bit more.</p>\n<h2 id=\"cleaning-up-the-data-with-cut\" style=\"position:relative;\"><a href=\"#cleaning-up-the-data-with-cut\" aria-label=\"cleaning up the data with cut permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cleaning up the data with <code>cut</code></h2>\n<p><code>cut</code> is another interesting command line utility that can be used in a whole lot of different ways to extract substrings (or columns) from text.</p>\n<p>Using <code>cut</code> we can remove all the unneeded text in 3 steps:</p>\n<ol>\n<li>remove the prefix <code>flagIOCmedalist|[[</code></li>\n<li>remove the suffix <code>]]</code></li>\n<li>clean up the names with the ‚Äú(judo)‚Äù disambiguation note. For example from <code>Jos√© Rodr√≠guez (judoka)|Jos√© Rodr√≠guez</code> we want to keep only <code>Jos√© Rodr√≠guez</code>.</li>\n</ol>\n<h3 id=\"substring-with-cut\" style=\"position:relative;\"><a href=\"#substring-with-cut\" aria-label=\"substring with cut permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Substring with <code>cut</code></h3>\n<p>The complete the first step (removing the prefix <code>flagIOCmedalist|[[</code>) we can use the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span>. <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -c<span class=\"token string\">\"19-\"</span></code></pre></div>\n<p>The option <code>-c\"19-\"</code> means: ‚Äútake the substring that starts from the character number 19 to the end of the string‚Äù. Character 19 is the 20th character considering that strings are <em>‚Äú0-indexed‚Äù</em>.\nYou can use the <code>-c</code> option to extract any generic substring. For example <code>-c\"4-8\"</code> will extract the substring from the 5th to the 9th character. If you leave the range open on the right it will take all the remaining string to the end.</p>\n<p>This filter will be applied to every line and it will modify our stream of data as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">Thierry Rey]]\nJos√© Rodr√≠guez (judoka)|Jos√© Rodr√≠guez]]\nTibor Kincses (judoka)|Tibor Kincses]]\nAramby Emizh]]\n...</code></pre></div>\n<h3 id=\"splitting-strings-with-cut\" style=\"position:relative;\"><a href=\"#splitting-strings-with-cut\" aria-label=\"splitting strings with cut permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Splitting strings with <code>cut</code></h3>\n<p>Now we would like to remove the suffix <code>]]</code>.\nIn order to achieve this goal we can use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span>. <span class=\"token function\">cut</span> -d <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">]</span> -f <span class=\"token number\">1</span></code></pre></div>\n<p>This time we are using the options <code>-d</code> and <code>-f</code>.\nWhen we use <code>d</code> we can specify a character to be used as delimiter (<code>]</code> in this case), this way <code>cut</code> will not split the string by character index but in chunks (or columns), generating a new chunk every time the delimiter is encountered along the line.\nThe option <code>-f</code> can be combined with <code>-d</code> to select one or more chunks, in this case we want to select the first chunk.\nAs we can expect, this will be the status of our data after this command is executed in the pipeline:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">Thierry Rey\nJos√© Rodr√≠guez (judoka)|Jos√© Rodr√≠guez\nTibor Kincses (judoka)|Tibor Kincses\nAramby Emizh\n...</code></pre></div>\n<p>The data looks almost clean, we just need to get rid of the occasional disambiguation notes. These cases can be distinguished by the character <code>|</code> (pipe) that separates the disambiguation definition from the text that must be rendered by the wikitext engine into HTML code. In these cases we want to keep only the part of the string after the pipe character. Again we can use <code>cut</code> with the options <code>-d</code> and <code>-f</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">..</span>. <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d <span class=\"token punctuation\">\\</span><span class=\"token operator\">|</span> -f <span class=\"token number\">2</span></code></pre></div>\n<p>This time we are using the pipe character as delimiter and we are taking only the second chunk of the string.\nThis might seem obvious at this stage, but what happens in all the rows where there‚Äôs no disambiguation note (and no pipe character)? In this cases we will have just one chunk containing the full line, so what do we get by using the option <code>-f 2</code>?\nLuckily in these cases <code>cut</code> is smart enough to assume the string is not matching our pattern and returns the entire line, so our data is not destroyed.</p>\n<p>The final result after this command is:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">Thierry Rey\nJos√© Rodr√≠guez\nTibor Kincses\nAramby Emizh\n...</code></pre></div>\n<p>Our data is finally clean! üéâ</p>\n<h2 id=\"counting-and-sorting-with-uniq-and-sort\" style=\"position:relative;\"><a href=\"#counting-and-sorting-with-uniq-and-sort\" aria-label=\"counting and sorting with uniq and sort permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Counting and sorting with <code>uniq</code> and <code>sort</code></h2>\n<p>Now that we have our clean list of names we need to count the occurrences of every athlete and sort.\nIn order to remove duplicates (and count the occurrences) we can use the command <code>uniq</code>. This command, when fed with some text, outputs the text itself with adjacent identical lines collapsed to one.\nThis means that before we can use <code>uniq</code> we need to have all the names sorted alphabetically so that all the athletes with multiple occurrences have their name repeated on multiple lines one after another.\nThis can be achieved with the command <code>sort</code>, which, as you might easily guess, just sorts all the lines received as input in alphabetical order.</p>\n<p>Just to give you a practical example, after using the command <code>sort</code> our data will look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">...\nPawe≈Ç Nastula\nPeter Seisenbacher\nPeter Seisenbacher\nPriscilla Gneto\nQin Dongya\nRadomir Kovaƒçeviƒá\nRafael Silva\nRafael Silva\nRafaela Silva\nRamaz Kharshiladze\n...</code></pre></div>\n<p>Now we can pipe the <code>uniq -c</code> command to our data processing flow in order to remove duplicates. The option <code>-c</code> prints in front of every line the number of consecutive occurrences originally found for that line.\nAfter this command we will have something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">...\n1 Pawe≈Ç Nastula\n2 Peter Seisenbacher\n1 Priscilla Gneto\n1 Qin Dongya\n1 Radomir Kovaƒçeviƒá\n2 Rafael Silva\n1 Rafaela Silva\n1 Ramaz Kharshiladze\n...</code></pre></div>\n<p>Note that <a href=\"https://en.wikipedia.org/wiki/Rafael_Silva_(judoka)\">Rafael Silva</a> and <a href=\"https://en.wikipedia.org/wiki/Rafaela_Silva\">Rafaela Silva</a> are two different athletes, it‚Äôs not a typo! üòÇ</p>\n<p>We are almost done. Now we just need to sort our data once again, but this time in reverse order. To do so we can use the <code>sort</code> command once again, this time as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sort</span> -nr</code></pre></div>\n<p>Where the option <code>-n</code> specifies that the first part of every line is a number (so the command can effectively distinguish and sort lines starting for example with <code>1</code> and <code>10</code>). The option <code>-r</code> instead indicates that we want to sort in revers order (bigger first).</p>\n<p>This concludes our pipeline of commands!</p>\n<h2 id=\"combining-all-together\" style=\"position:relative;\"><a href=\"#combining-all-together\" aria-label=\"combining all together permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Combining all together</h2>\n<p>Combining all the commands together, our final pipeline will be the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -sS <span class=\"token string\">\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo?action=raw\"</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">grep</span> -Eoi <span class=\"token string\">\"flagIOCmedalist\\|\\[\\[(.+)\\]\\]\"</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">cut</span> -c<span class=\"token string\">\"19-\"</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">cut</span> -d <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">]</span> -f <span class=\"token number\">1</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">cut</span> -d <span class=\"token punctuation\">\\</span><span class=\"token operator\">|</span> -f <span class=\"token number\">2</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">sort</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">uniq</span> -c <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">sort</span> -nr</code></pre></div>\n<p>Now that you understood every single part it shouldn‚Äôt look very cryptic.</p>\n<p>If we execute it, we can finally discover who are the best Judo Olympic athletes up to Rio 2016:</p>\n<p>‚Ä¶ drum rolls ‚Ä¶</p>\n<p>With 4 medals:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Driulis_Gonz%C3%A1lez\">Driulis Gonz√°lez</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Angelo_Parisi\">Angelo Parisi</a></li>\n</ul>\n<p>With 3 medals:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Teddy_Riner\">Teddy Riner</a> (The guy in the picture!)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Tadahiro_Nomura\">Tadahiro Nomura</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Ryoko_Tani\">Ryoko Tamura</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Rishod_Sobirov\">Rishod Sobirov</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Mark_Huizinga\">Mark Huizinga</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Idalys_Ortiz\">Idalys Ortiz</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Edith_Bosch\">Edith Bosch</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/David_Douillet\">David Douillet</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Amarilis_Sav%C3%B3n\">Amarilis Sav√≥n</a></li>\n</ul>\n<p>Lot‚Äôs of French people there, uh! It‚Äôs a shame no Italian athlete is there yet! üòâ</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>I hope this article showed you that the unix shell is a very powerful tool. If you learn its basic commands and the most common options you will be able to complete a hell of a lot of task directly from the command line by just wisely combining them. You will not need to open an editor and write a long script and then to have an interpreter like <a href=\"/tag/node-js\">Node.js</a> to run it, sometimes the command line is just enough you need!</p>\n<p>If you want to experiment a bit more with this topic, I can propose you a nice variation of this tutorial as exercise:</p>\n<p><strong>Can you compute the ranking of the nations with the highest number of medals?</strong></p>\n<p>If so, please write your solution in the comments ü§ì</p>\n<p>Until next time!</p>\n<p>Cheers</p>\n<h2 id=\"alternative-approaches\" style=\"position:relative;\"><a href=\"#alternative-approaches\" aria-label=\"alternative approaches permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Alternative approaches</h2>\n<p><strong>EXTRA</strong> (Updated on Wed 29th August 2016)</p>\n<p>Some people are suggesting interesting alternative solutions. I think it‚Äôs nice to list them here.</p>\n<h3 id=\"improved-grep-with-the-reset-match-operator\" style=\"position:relative;\"><a href=\"#improved-grep-with-the-reset-match-operator\" aria-label=\"improved grep with the reset match operator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Improved <code>grep</code> with the reset match operator</h3>\n<p>In the newest versions of Gnu grep (not currently available on Mac!) is possible to use the <code>\\K</code> operator (reset match).</p>\n<p><code>\\K</code> resets the starting point of the reported match. Any previously consumed characters are no longer included in the final match. (See the complete regex on <a href=\"https://regex101.com/r/tJ9qI1/1\">regex101</a>)</p>\n<p>With this approach we can rewrite our command as follows, effectively getting rid of all the <code>cut</code> commands in the pipeline:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -sS <span class=\"token string\">\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo?action=raw\"</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">grep</span> -Po <span class=\"token string\">'flagIOCmedalist\\|\\[\\[(.* \\(judoka\\)\\|)?\\K[^\\]]*'</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">sort</span> <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">uniq</span> -c <span class=\"token operator\">|</span><span class=\"token punctuation\">\\</span>\n <span class=\"token function\">sort</span> -nr</code></pre></div>\n<p>Solution suggested by <em>pakistanprogrammerclub</em> in the <a href=\"#comment-2844392299\">comments</a></p>\n<h3 id=\"quget\" style=\"position:relative;\"><a href=\"#quget\" aria-label=\"quget permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>quget</h3>\n<p><a href=\"https://www.npmjs.com/package/quget\">quget</a> is a command line utility authored in <a href=\"/tag/node-js\">Node.js</a> that brings together the power of famous node packages such as request, cheerio, and jQuery-like CSS selectors to the command-line.</p>\n<p>To run the following command you need to have Node.js installed and to install <code>quget</code> with <code>npm i -g quget</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">quget https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo <span class=\"token string\">\"#mw-content-text table.wikitable tr:nth-child(n+2) td:nth-child(n+2) a:first-of-type, #mw-content-text table.wikitable tr:nth-child(n+2) td:only-child a:first-of-type\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> <span class=\"token operator\">|</span> <span class=\"token function\">uniq</span> -c <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -nr</code></pre></div>\n<p>Solution by <em>…π…êqoo…ü</em> in the <a href=\"#comment-2840602442\">comments</a>.</p>\n<p><em>shapeshed</em> on reddit mentioned <a href=\"https://github.com/ericchiang/pup\">pup</a> an alternative command written in <a href=\"/tag/go\">Go</a>.</p>\n<h3 id=\"awk\" style=\"position:relative;\"><a href=\"#awk\" aria-label=\"awk permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>awk</h3>\n<p><code>awk</code> is a programming language designed for text processing and typically used as a data extraction and reporting tool. It is a standard feature of most Unix-like operating systems (cit. <a href=\"https://en.wikipedia.org/wiki/AWK\">Wikipedia</a>).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -sS <span class=\"token string\">\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo?action=raw\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -F<span class=\"token string\">'\\|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\[<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\[|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\]'</span> <span class=\"token string\">'/flagIOCmedalist/{a[<span class=\"token variable\">$2</span>]++} END {for (i in a) print a[i], i | \"sort -r\"}'</span></code></pre></div>\n<p>This didn‚Äôt work for me on a Mac, but it did work on an Ubuntu machine.</p>\n<p>Solution by <em>Boris P.</em> on Facebook.</p>\n<h3 id=\"sed\" style=\"position:relative;\"><a href=\"#sed\" aria-label=\"sed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>sed</h3>\n<p><code>sed</code> (stream editor) is a Unix utility that parses and transforms text, using a simple, compact programming language. (See more on <a href=\"https://en.wikipedia.org/wiki/Sed\">Wikipedia</a>).</p>\n<p>We can use <code>sed</code> as an alternative to grep to extract the names of the judokas in one shot. Our final command will look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -sS <span class=\"token string\">\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo?action=raw\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -n <span class=\"token string\">'/flagIOCmedalist/{s/^.*\\[\\[//; s/\\]\\].*//; s/^.*|//;p}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> <span class=\"token operator\">|</span> <span class=\"token function\">uniq</span> -c <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -nr</code></pre></div>\n<p>This approach doesn‚Äôt seem to be working on Mac tough.</p>\n<p>Solution suggested by <em>pakistanprogrammerclub</em> in the <a href=\"#comment-2844392299\">comments</a></p>\n<h3 id=\"in-browser-developer-console\" style=\"position:relative;\"><a href=\"#in-browser-developer-console\" aria-label=\"in browser developer console permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>In-Browser developer console</h3>\n<p>You can extract data from the current web page using the developer console that most browsers offer (Chrome, Opera, Firefox‚Ä¶). After opening <a href=\"https://en.wikipedia.org/wiki/List_of_Olympic_medalists_in_judo\">our Wikipedia page of interest</a>, in the developer console you can run the following <a href=\"/tag/javascript\">JavaScript</a> one-liner:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">;</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">slice</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'table tr td:nth-child(n+2) > a:nth-child(1), table tr:nth-child(3) td > a:nth-child(1)'</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> e<span class=\"token punctuation\">.</span>innerText\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res<span class=\"token punctuation\">,</span> el</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> res<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> res<span class=\"token punctuation\">[</span>el<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">return</span> res\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The result is an object with the medalists as keys, and the count as values. JavaScript objects are unordered so sorting is left as an exercise for the reader.</p>\n<p>Solution by <em>lacksconfidence</em> on <a href=\"https://news.ycombinator.com/item?id=12293209\">HackerNews</a></p>\n<h3 id=\"xpath-and-google-spreadsheet-or-python\" style=\"position:relative;\"><a href=\"#xpath-and-google-spreadsheet-or-python\" aria-label=\"xpath and google spreadsheet or python permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>XPath and Google Spreadsheet or Python</h3>\n<p>XPath (XML Path Language) is a query language for selecting nodes from an XML document (cit. <a href=\"https://en.wikipedia.org/wiki/XPath\">Wikipedia</a>).</p>\n<p>By downloading the HTML of the Wikipedia page and applying an XPath selector like <code>//table//tr/td[2]/a[1]/text()</code> we should be able to extract all the gold medalist in the tables. In the same fashion we can build a slightly more complex solution by combining more selectors:</p>\n<div class=\"gatsby-highlight\" data-language=\"none\"><pre class=\"language-none\"><code class=\"language-none\">//table//tr/td[2]/a[1]/text()|//table//tr/td[3]/a[1]/text()|//table//tr/td[4]/a[1]/text()</code></pre></div>\n<p>With this approach we can easily import data into a spreadsheet software like Google Spreadsheet. In Google Spreadsheet we can use the function <code>IMPORTXML</code> to run an XPath expression against an XML or HTML document available on a given URL.</p>\n<p>I created an <a href=\"https://docs.google.com/spreadsheets/d/1VVFIGFcmuVpDRBR9xKe-s_T4tJk0-tLcvuf_gKVuKfA/edit?usp=sharing\">example document</a> that you can check out if you are curious to see this feature in action.</p>\n<p>Solution based on comments by <em>turtlebits</em> and <em>san</em>dimitri_ on <a href=\"https://news.ycombinator.com/item?id=12294667\">HackerNews</a>.</p>\n<p>I‚Äôm glad to know I inspired <a href=\"https://twitter.com/@NikolaiHampton\">Nikolai Hampton</a> to write an <a href=\"http://3583bytesready.net/2016/08/17/scraping-data-python-xpath/\">amazing article</a> that illustrates how to solve this problem using XPath expressions in <strong>Python</strong>. If you like Python the article is absolutely a must, don‚Äôt miss it out!</p>","frontmatter":{"title":"Extracting data from Wikipedia using curl, grep, cut and other shell commands","slug":"extracting-data-from-wikipedia-using-curl-grep-cut-and-other-bash-commands","author":"Luciano Mammino","tags":["bash","shell"],"date":"August 15, 2016","header_img":{"publicURL":"/static/36063b91a1276ad6ef4fc192d807c41d/extracting-data-from-wikipedia-using-curl-grep-and-other-bash-commands-judo-teddy-riner.jpg"}}}},"pageContext":{"slug":"extracting-data-from-wikipedia-using-curl-grep-cut-and-other-bash-commands","width":440,"height":220,"type":"twitter"}}}